<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="csrf-token" content="{{ csrf_token() }}" />
    <meta name="description"
        content="Grocer offers a wide variety of groceries including fresh produce, dairy products, meats, and household essentials. Shop online and get everything you need delivered to your doorstep." />
    <meta name="keywords"
        content="grocery, online grocery, fresh produce, dairy products, meats, household essentials, Grocer" />
    <meta name="author" content="Software System" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="Grocer" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta property="og:title" content="Grocer - Your One-Stop Grocery Shop" />
    <meta property="og:description"
        content="Grocer offers a wide variety of groceries including fresh produce, dairy products, meats, and household essentials. Shop online and get everything you need delivered to your doorstep." />
    <meta property="og:image"
        content="https://grocer.softwaresystems.us/storage/app/public/restaurant/2024-05-30-665896300dbbd.png" />
    <meta property="og:url" content="https://groceapp.softwaresystems.us/" />
    <meta property="og:type" content="website" />
    <link rel="shortcut icon" href="https://grocer.softwaresystems.us/storage/app/public/restaurant/{{ $favicon }}"
        type="image/x-icon" />
    <title>Refund</title>
    <!-- {{-- Quicksand --}} -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet" />
    <!-- {{-- Poppins --}} -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet" />
    <!-- {{-- Mulish --}} -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,200..1000;1,200..1000&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet" />
    <!-- {{-- Roboto --}} -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
        rel="stylesheet" />
    <!-- {{-- Inter --}} -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet" />
    <!-- {{-- Bootstrap 5 --}} -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
    <!-- {{-- Bootstrap 5 Icons --}} -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <!-- {{-- Font Awesome Icons CDN --}} -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <!-- {{-- NavBar Custom Stylesheet --}} -->
    <link rel="stylesheet" href="/Assets/CSS/Navbar.css" />
    <!-- {{-- Footer Custom Stylesheet --}} -->
    <link rel="stylesheet" href="/Assets/CSS/Footer.css">
    <!-- {{-- Bread Crumbs Style  --}} -->
    <link rel="stylesheet" href="/Assets/CSS/Components/breadCrumbs.css">
    <!-- {{-- About Us Page Custom Stylesheet --}} -->
    <link rel="stylesheet" href="/Assets/CSS/Refund.css">
    <!-- {{-- Search Card Custom Stylesheet --}} -->
    <link rel="stylesheet" href="/Assets/CSS/Components/search_product.css">
    <!-- {{-- Search Page Css Custom Style --}} -->
    <link rel="stylesheet" href="/Assets/CSS/search.css">
    <!-- {{-- Rating Stars Custom Stylesheet --}} -->
    <link rel="stylesheet" href="/Assets/CSS/Components/ratingStars.css">
    <!-- {{-- Nav Home Custom Stylesheet --}} -->
    <link rel="stylesheet" href="/Assets/CSS/Home.css">
    <link rel="stylesheet" href="Assets/CSS/cart.css">
    <link rel="stylesheet" href="Assets/CSS/cart_dropdown.css">
    <link rel="stylesheet" href="/Assets/CSS/navbar_side_icons.css">
    <link rel="stylesheet" href="/Assets/CSS/Animations.css">
    <link rel="stylesheet" href="/Assets/CSS/Components/products.css">
    <!-- {{-- Wishlist Page Css Custom Style --}} -->
    <link rel="stylesheet" href="/Assets/CSS/wishlist.css">
    <!-- {{-- SubNav Home Custom Stylesheet --}} -->
    <link rel="stylesheet" href="/Assets/CSS/subnav_home.css">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <!-- Favicon -->
    <link rel="shortcut icon" href="Assets/Images/Banner/Favicon.png" type="image/x-icon">


<body>

    <!-- Animated Logo Cover -->
    <div id="logo-cover" class="logo-cover d-flex justify-content-center align-items-center">
        <img src="Assets/Images/Icons/GrocerLogo.png" alt="Grocer Logo" class="animated-logo" />
    </div>

    <!-- Animated Logo End -->

    <!-- Header dynamically added from index.js file -->
    <header></header>

    <!--********* BREADCRUMBS *********-->
    <div class="breadcrumbs">
        <div class="container">
            <ul class="breadcrumb">
                <li><a href="/" wire:navigate>Home</a></li>
                <li><a href="" wire:navigate>Refund</a></li>
            </ul>
        </div>
    </div>
    <!--********* BREADCRUMBS *********-->
    <div class="refund_main">
        <h1 class="refund_main_heading">Refund Request Form</h1>
        <form id="refundForm">
            <!-- First Name and Last Name -->
            <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-6">
                    <label for="fname" class="refund_labels_inp">First Name</label><br>
                    <input type="text" id="fname" name="fname" placeholder="" class="refund_inps1"><br>
                </div>
                <div class="col-sm-12 col-md-12 col-lg-6 mt-sm-4 mt-md-4 mt-lg-0">
                    <label for="lname" class="refund_labels_inp">Last Name</label><br>
                    <input type="text" id="lname" name="lname" placeholder="" class="refund_inps1"><br>
                </div>
            </div>

            <!-- Email -->
            <div class="row mt-4">
                <div class="col">
                    <label for="email" class="refund_labels_inp">Email</label><br>
                    <input type="email" id="email" name="email" class="refund_inps"><br>
                </div>
            </div>

            <!-- Reason for Refund -->
            <div class="mt-4">
                <label for="reasonForRefund" class="refund_labels_inp">Reason for Refund</label><br>
                <div class="refund_reason_radios">
                    <input type="radio" name="reason" value="Product is bad" class="refund_radio" checked>
                    <label class="refund_reason_labels">Product is bad</label>
                </div>
                <div class="refund_reason_radios">
                    <input type="radio" name="reason" value="Wrong Product delivery" class="refund_radio">
                    <label class="refund_reason_labels">Wrong Product delivery</label>
                </div>
                <div class="refund_reason_radios">
                    <input type="radio" name="reason" value="Exclusive price" class="refund_radio">
                    <label class="refund_reason_labels">Exclusive price</label>
                </div>
                <div class="refund_reason_radios">
                    <input type="radio" name="reason" value="Other reason" class="refund_radio">
                    <label class="refund_reason_labels">Other reason</label>
                </div>
            </div>

            <!-- Order Number and Product Name -->
            <div class="row mt-4">
                <div class="col">
                    <label for="selectedOrderId" class="refund_labels_inp">Order Number</label><br>
                    <select id="selectedOrderId" name="ticketno" class="refund_inps">
                        <option value="">Select Invoice Number</option>
                        <option value="100022">100022</option>
                        <option value="100023">100023</option>
                    </select>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col">
                    <label for="selectedProductName" class="refund_labels_inp">Product Name</label><br>
                    <select id="selectedProductName" name="product_name" class="refund_inps" wire:model="productname">
                        <option value="">Select Product</option>
                        <option value="apple">Apple</option>
                        <option value="banana">Banana</option>
                        <option value="carrot">Carrot</option>
                    </select>
                </div>
            </div>

            <!-- Product Image Upload -->
            <div class="row mt-4">
                <div class="col">
                    <label for="product_image" class="refund_labels_inp">Upload return product image</label><br>
                    <input type="file" id="product_image" name="product_image" class="refund_inpsImage refundnone"><br>
                </div>
            </div>

            <!-- Purchase Date -->
            <div class="row mt-4">
                <div class="col">
                    <label for="buyDate" class="refund_labels_inp">When did you buy the product?</label><br>
                    <input type="date" id="buyDate" name="product_buy_date" class="refund_inps"><br>
                </div>
            </div>

            <!-- Requested Amount -->
            <div class="row mt-4">
                <div class="col">
                    <label for="requestedAmount" class="refund_labels_inp">Requested amount</label><br>
                    <input type="number" id="requestedAmount" name="requested_amount" class="refund_requested_inp"><br>
                </div>
            </div>

            <!-- Additional Notes -->
            <div class="row mt-4">
                <div class="col">
                    <label for="refund_notes" class="refund_labels_inp">Additional note</label><br>
                    <textarea id="refund_notes" name="refund_notes" cols="70" rows="10"
                        class="refund_notes_inp"></textarea><br>
                </div>
            </div>

            <!-- Refund Agreement -->
            <div class="mt-4">
                <div class="refund_reason_radios">
                    <input type="radio" name="refund_radio_amount_back" value="0" class="refund_radio_last_agree">
                    <label class="refund_reason_labels">I agree the refunded money to be sent back to the account that I
                        previously paid.</label><br>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="row mt-4">
                <div class="col">
                    <button class="refund_submit_btn" type="submit">Submit</button>
                </div>
            </div>
            <div id="error-messages" style="margin-top: 20px;"></div>
        </form>
    </div>
    <div class="container">
        <hr>
    </div>
    <!--********* FOOTER *********-->

    <!-- Footer dynamically added from index.js file -->
    <footer></footer>
    <!--********* FOOTER *********-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQuery -->
    <script>
        const menuItems = document.querySelectorAll('.menu-item');

        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                // Hide all content
                document.querySelectorAll('.content > div').forEach(content => {
                    content.style.display = 'none';
                });

                // Show the selected content
                const contentId = `content-${item.id}`;
                const contentToShow = document.getElementById(contentId);
                if (contentToShow) {
                    contentToShow.style.display = 'block';
                }

                // Update menu item color
                menuItems.forEach(menuItem => {
                    menuItem.classList.remove('active');
                });
                item.classList.add('active');
            });
        });

        // Set initial state
        const initialMenuItem = document.getElementById('item1'); // Assuming the first menu item has id 'item1'
        if (initialMenuItem) {
            initialMenuItem.click(); // Simulate click on the first menu item to show its content
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <script>
        $(document).ready(function () {
            $(".FeaturedBtnLeft").click(function () {
                $(".WebViewCarouselOneProductDetails").animate({
                    scrollLeft: "-=250px" // Adjust the value as needed for the scroll distance
                }, "slow");
            });

            $(".FeaturedBtnRight").click(function () {
                $(".WebViewCarouselOneProductDetails").animate({
                    scrollLeft: "+=250px" // Adjust the value as needed for the scroll distance
                }, "slow");
            });
        });
    </script>
    <script>
        $(document).ready(function () {
            $(".CategoryBtnLeft").click(function () {
                $(".WebViewCategoriesCardOneProductDetails").animate({
                    scrollLeft: "-=250px" // Adjust the value as needed for the scroll distance
                }, "slow");
            });

            $(".CategoryBtnRight").click(function () {
                $(".WebViewCategoriesCardOneProductDetails").animate({
                    scrollLeft: "+=250px" // Adjust the value as needed for the scroll distance
                }, "slow");
            });
        });
    </script>
    <script>
        document.getElementById('refundForm').addEventListener('submit', async function (event) {
            event.preventDefault(); // Prevent form from submitting the default way

            const form = document.getElementById('refundForm');

            // Collect form data as a JSON object
            const refundData = {
                fname: document.getElementById('fname').value,
                lname: document.getElementById('lname').value,
                email: document.getElementById('email').value,
                requested_date: new Date().toISOString().split('T')[0], // current date
                reason: form.querySelector('input[name="reason"]:checked').value,
                product_name: document.getElementById('selectedProductName').value,
                ticketno: document.getElementById('selectedOrderId').value,
                product_buy_date: document.getElementById('buyDate').value,
                requested_amount: document.getElementById('requestedAmount').value,
                note: document.getElementById('refund_notes').value,
                refund_money: form.querySelector('input[name="refund_radio_amount_back"]:checked') ? 1 : 0 // Assuming 1 or 0 for refund money agreement
            };

            // Handle the image conversion to Base64
            const productImage = document.getElementById('product_image').files[0];

            if (productImage) {
                refundData.product_image = await toBase64(productImage); // Add Base64 image data to the refundData object
            } else {
                refundData.product_image = null; // If no image is uploaded
            }

            try {
                const response = await fetch('https://grocer.softwaresystems.us/api/v1/refund', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        // Add additional headers if needed, like authorization, etc.
                    },
                    body: JSON.stringify(refundData) // Send data as JSON
                });

                if (response.ok) {
                    const result = await response.json();
                    alert('Your refund request has been submitted successfully!');
                } else {
                    const errorData = await response.json();
                    console.log('Error response:', errorData);

                    // Clear previous error messages
                    const errorContainer = document.getElementById('error-messages');
                    errorContainer.innerHTML = '';

                    // Display errors
                    errorData.errors.forEach(error => {
                        const errorMessage = document.createElement('p');
                        errorMessage.style.color = 'red';
                        errorMessage.textContent = error.message;
                        errorContainer.appendChild(errorMessage);
                    });

                    alert('There was an issue with your refund request. Please check the form for errors.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while processing your request.');
            }
        });

        // Helper function to convert file to base64
        function toBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }

    </script>

    <script src="/Assets/JS/index.js"></script>
    <script src="/Assets/JS/featured.js"></script>
    <script src="/Assets/JS/bestsell.js"></script>
    <script src="/Assets/JS/homelasttopsell.js"></script>
    <script src="/Assets/JS/homelasttrending.js"></script>
    <script src="/Assets/JS/homelastpopular.js"></script>
    <script src="/Assets/JS/homelastlatest.js"></script>
    <script src="/Assets/JS/top_sell_products.js"></script>
    <script src="/Assets/JS/cart.js"></script>
    <script src="/Assets/JS/product_details.js"></script>
    <script src="/Assets/JS/cart_dropdown.js"></script>
    <script src="/Assets/JS/search_product.js"></script>
    <script src="/Assets/JS/category_product.js"></script>
    <script src="/Assets/JS/wishlist.js"></script>
    <script src="/Assets/JS/Animations.js"></script>
    <script src="/Assets/JS/browse_category_dropdown.js"></script>
    <script src="/Assets/JS/navbar.js"></script>

</body>

</html>